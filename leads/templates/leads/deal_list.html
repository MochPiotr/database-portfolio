<section>

    <div class="search">
        <div class="search-input">
            <span class="material-symbols-outlined">search</span>
            <input type="search" name="search" class="input" placeholder="Search leads...">
        </div>
    </div>

    <div class="table">

        <div class="table_header">
            <div class="table_cell" data-type="text">
                <h2>Name</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell" data-type="text">
                <h2>Lead</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell" data-type="number">
                <h2>Value</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell" data-type="number">
                <h2>Probability</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell" data-type="date">
                <h2>Close date</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell" data-type="text">
                <h2>Owner</h2><span class="material-symbols-outlined">keyboard_arrow_down</span>
            </div>
            <div class="table_cell">
                <h2>Action</h2>
            </div>
        </div>

        {% if request.resolver_match.url_name == 'dashboard' %}

            {% for deal in top_deals %}
            <div class="table_row">
                <div class="table_cell" data-label="Name">{{ deal.name }}</div>
                <div class="table_cell" data-label="Lead">{{ deal.lead }}</div>
                <div class="table_cell" data-label="Value">${{ deal.value }}</div>
                <div class="table_cell" data-label="Probability">{{ deal.probability }}%</div>
                <div class="table_cell" data-label="Close date">{{ deal.close_date }}</div>
                <div class="table_cell" data-label="Owner">{{ deal.agent|default:"n/a" }}</div>
                <div class="table_cell" data-label="Action">
                    <a href="{% url 'leads:deal-detail' deal.pk %}">Details</a>
                </div>
            </div>
            {% endfor %}

        {% else %}

            {% for deal in deal_list %}
            <div class="table_row">
                <div class="table_cell" data-label="Name">{{ deal.name }}</div>
                <div class="table_cell" data-label="Lead">{{ deal.lead }}</div>
                <div class="table_cell" data-label="Value">${{ deal.value }}</div>
                <div class="table_cell" data-label="Probability">{{ deal.probability }}%</div>
                <div class="table_cell" data-label="Close date">{{ deal.close_date }}</div>
                <div class="table_cell" data-label="Owner">{{ deal.agent|default:"n/a" }}</div>
                <div class="table_cell" data-label="Action">
                    <a href="{% url 'leads:deal-detail' deal.pk %}">Details</a>
                </div>
            </div>

            {% empty %}
            <div class="table_row">
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
                <div class="table_cell">n/a</div>
            </div>
            {% endfor %}

        {% endif %}

    </div> 

</section>
